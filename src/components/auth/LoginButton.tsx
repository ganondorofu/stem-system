"use client";

import { createClient } from '@/lib/supabase/client';
import { Button } from '@/components/ui/button';

const DiscordIcon = () => (
  <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2 fill-current">
    <title>Discord</title>
    <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4464.8245-.6667 1.2835a18.2938 18.2938 0 00-5.3223 0c-.2203-.459-.4557-.9082-.6667-1.2835a.0741.0741 0 00-.0785-.0371 19.7362 19.7362 0 00-4.8851 1.5152.0688.0688 0 00-.0371.0785c.4216 1.8394 1.2183 3.6142 2.3159 5.1684-1.54.4463-2.9122 1.154-4.0882 2.054a.0741.0741 0 00-.0216.082c.0252.0913.0474.1856.0725.2741.2522.8832.5539 1.7415.8953 2.562.0371.0913.1112.1463.2082.1352.6822-.1701 1.33-.3882 1.933-.6502.5854.4963 1.2204.934 1.897 1.321.7243.4121 1.4883.7667 2.2859 1.0527a.0741.0741 0 00.0864-.0474c.231-.6966.4216-1.41.5721-2.14.0504-.2521.0913-.5043.1227-.7667-.0312-.0052-.0625-.0104-.0937-.0156-1.0312-.1701-2.021-.4963-2.9228-.9652.1227-.0625.2453-.1352.368-.2081.9366-.5462 1.801-1.2183 2.59-2.0178.6821.6085 1.4153 1.1644 2.1993 1.6589.1702.1017.3404.2033.5106.2944a.0741.0741 0 00.0937-.0209c.3414-.8202.6431-1.6785.8953-2.562.0252-.0887.0474-.183.0725-.2741a.0741.0741 0 00-.0216-.082c-1.176-.8999-2.5479-1.6077-4.0882-2.054.9366-1.3129 1.6977-2.9495 2.2222-4.7856a.0688.0688 0 00-.0371-.0785zM8.02 15.3312c-.9366 0-1.6977-.772-1.6977-1.721s.7611-1.721 1.6977-1.721c.9679 0 1.729.772 1.6977 1.721-.0001.949-.7611 1.721-1.6977 1.721zm7.9575 0c-.9366 0-1.6977-.772-1.6977-1.721s.7611-1.721 1.6977-1.721c.9679 0 1.729.772 1.6977 1.721-.0001.949-.7611 1.721-1.6977 1.721z"/>
  </svg>
);

export function LoginButton() {
  const supabase = createClient();

  const handleLogin = async () => {
    await supabase.auth.signInWithOAuth({
      provider: 'discord',
    });
  };

  return (
    <Button onClick={handleLogin} className="w-full text-lg py-6" size="lg">
      <DiscordIcon />
      Sign in with Discord
    </Button>
  );
}
